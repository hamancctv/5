




<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<html>
<!-- Default Statcounter code for hamanCCTV
https://hamancctv.github.io/4/ -->
<script type="text/javascript">
var sc_project=12890481; 
var sc_invisible=1; 
var sc_security="b521e841"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/12890481/0/b521e841/1/"
alt="Web Analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->
<head>
    <meta charset="utf-8">
    <title>GIS 모바일</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/kang-chan/hamancctv4/main/favicon.ico" />
<script type ="text/javascript" src="mmw.js"> </script>
</head> 
    
   <style>
#container {overflow:hidden;height:100%;position:relative;}
#mapWrapper {width:100%;height:100%;z-index:1;}
#rvWrapper {width:50%;height:100%;top:0;right:0;position:absolute;z-index:0;}
#container.view_roadview #mapWrapper {width: 50%;}
#roadviewControl {position:absolute;top:2px;left:115px;width:42px;height:42px;z-index: 1;cursor: pointer; background: url(https://t1.daumcdn.net/localimg/localimages/07/2018/pc/common/img_search.png) 0 -450px no-repeat;}
#roadviewControl.active {background-position:0 -350px;}
#close {position: absolute;padding: 4px;top: 5px;left: 5px;cursor: pointer;background: #fff;border-radius: 4px;border: 1px solid #c8c8c8;box-shadow: 0px 1px #888;}
#close .img {display: block;background: url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/rv_close.png) no-repeat;width: 14px;height: 14px;}

       .custom_typecontrol2_m {position:absolute;bottom:5px;right:10px;overflow:hidden;width:85px;height:25px;margin:0;padding:0;z-index:1;font-size:12px;font-family:'Malgun Gothic', '맑은 고딕', sans-serif;}
.custom_typecontrol2_m span {display:block;width:40px;height:30px;float:left;text-align:center;line-height:25px;cursor:pointer;}
.custom_typecontrol2_m .btn {background:#fff;background:linear-gradient(#fff,  #e6e6e6);}       
.custom_typecontrol2_m .btn:hover {background:#f5f5f5;background:linear-gradient(#f5f5f5,#e3e3e3);}
.custom_typecontrol2_m .btn:active {background:#e6e6e6;background:linear-gradient(#e6e6e6, #fff);}    
.custom_typecontrol2_m .selected_btn {color:#fff;background:#425470;background:linear-gradient(#425470, #5b6d8a);}
.custom_typecontrol2_m .selected_btn:hover {color:#fff;}   
       
 html, body {width:100%;height:100%;margin:0;padding:0;overflow: hidden}
        
#menu_wrap {position:absolute;top:40px;right:8px;bottom:70%;width:270px;margin:3px 0 5px 10px;padding:5px;overflow-y:auto;background:rgba(255, 255, 255, 0.8);z-index: 1;font-size:12px;border-radius: 0px;}
.bg_white {background:#fff;}
#menu_wrap hr {display: block; height: 1px;border: 0; border-top: 2px solid #5F5F5F;margin:3px 0;}
#menu_wrap .option{text-align: center;}
  .name:hover { background:#cdcdcd; }     
.bg_white {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
}

#menu_rule {position:absolute;left:2;top:45;height:24px;width:197px;margin:0px 0px 0px 0px;padding:5px;overflow-y:none;background:rgba(255, 255, 255, 0.8);z-index: 1;font-size:12px;border-radius: 0px;}
.bg_white {background:#fff;}
#menu_rule hr {display: block; height: 1px;border: 0; border-top: 2px solid #5F5F5F;margin:3px 0;}
#menu_rule .option{text-align: center;}
       
       .info {position:relative;top:5px;left:5px;border-radius:6px;border: 1px solid #ccc;border-bottom:2px solid #ddd;font-size:12px;padding:5px;background:#fff;list-style:none;margin:0;} 
.info:nth-of-type(n) {border:0; box-shadow:0px 1px 2px #888;}    
.number {font-weight:bold;color:#00a0e9;} 

.dot {overflow:hidden;float:left;width:12px;height:12px;background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/mini_circle.png');}    
.dotOverlay {position:relative;bottom:10px;border-radius:6px;border: 1px solid #ccc;border-bottom:2px solid #ddd;float:left;font-size:12px;padding:5px;background:#fff;}
.dotOverlay:nth-of-type(n) {border:0; box-shadow:0px 1px 2px #888;}    
.number {font-weight:bold;color:#ee6152;}
.dotOverlay:after {content:'';position:absolute;margin-left:-6px;left:50%;bottom:-8px;width:11px;height:8px;background:url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white_small.png')}
.distanceInfo {position:relative;top:5px;left:5px;list-style:none;margin:0;}
.distanceInfo .label {display:inline-block;width:50px;}
.distanceInfo:after {content:none;}
       
    </style>

<div id="container">
    <div id="rvWrapper">
        <div id="roadview" style="width:100%;height:100%;"></div> <!-- 로드뷰를 표시할 div 입니다 -->
        <div id="close" title="로드뷰닫기" onclick="closeRoadview()"><span class="img"></span></div>
    </div>
    <div id="mapWrapper">
        <div id="map" style="width:100%;height:100%"></div> <!-- 지도를 표시할 div 입니다 -->
        <div id="roadviewControl" onclick="setRoadviewRoad()"></div>
    </div>
</div>
  <!-- 2-2. input:text 태그 -->
    <button id="btn_input_copy" style= "position:absolute;top:12;width:45;right:285;z-index:200">복사</button>
 <input type="text" inputmode="none" class='form-control' style= "position:absolute;top:13;width:270;right:10;z-index:20" id = "gpsyx" value ="35.2725308711779, 128.406307024695"></button>

   <input type="search" id="keyword" onkeyup="filter()" onkeydown="Enter_Check()" class="clickdown" style="position:absolute;top:13;width:200;left:210;z-index:200"/>
   <button tabindex="-1" id="searchBtn" onclick="btnsearch_click()" style="position:absolute;top:12;width:45;left:160;z-index:20" class="bsuccess">검색</button>
<div class="custom_typecontrol2_m radius_border">
	<span id="btnCurrentMe" class="btn" onclick="mapCurrentPosition2()">내위치</span>
	<span id="btnCurrentHideMe" class="selected_btn" onclick="mapCurrentPositionHide()">숨김</span>
</div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2634b7b6dd61e41a4d6c0bf40a2ef820&libraries=services,clusterer,drawing"></script>
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
<script>
var overlayOn = false, // 지도 위에 로드뷰 오버레이가 추가된 상태를 가지고 있을 변수
    container = document.getElementById('container'), // 지도와 로드뷰를 감싸고 있는 div 입니다
    mapWrapper = document.getElementById('mapWrapper'), // 지도를 감싸고 있는 div 입니다
    mapContainer = document.getElementById('map'), // 지도를 표시할 div 입니다 
    rvContainer = document.getElementById('roadview'); //로드뷰를 표시할 div 입니다


var mapCenter = new kakao.maps.LatLng(35.2725308711779, 128.406307024695), // 지도의 중심좌표
    mapOption = {
        center: mapCenter, // 지도의 중심좌표
        level: 4, // 지도의 확대 레벨 
	              //  mapTypeId: kakao.maps.MapTypeId.HYBRID

    };

// 지도를 표시할 div와 지도 옵션으로 지도를 생성합니다
var map = new kakao.maps.Map(mapContainer, mapOption);

// 로드뷰 객체를 생성합니다 
var rv = new kakao.maps.Roadview(rvContainer); 

// 좌표로부터 로드뷰 파노라마 ID를 가져올 로드뷰 클라이언트 객체를 생성합니다 
var rvClient = new kakao.maps.RoadviewClient(); 

// 로드뷰에 좌표가 바뀌었을 때 발생하는 이벤트를 등록합니다 
kakao.maps.event.addListener(rv, 'position_changed', function() {

    // 현재 로드뷰의 위치 좌표를 얻어옵니다 
    var rvPosition = rv.getPosition();

    // 지도의 중심을 현재 로드뷰의 위치로 설정합니다
    map.setCenter(rvPosition);

    // 지도 위에 로드뷰 도로 오버레이가 추가된 상태이면
    if(overlayOn) {
        // 마커의 위치를 현재 로드뷰의 위치로 설정합니다
        marker.setPosition(rvPosition);
    }
});

// 마커 이미지를 생성합니다
var markImage = new kakao.maps.MarkerImage(
    'https://t1.daumcdn.net/localimg/localimages/07/2018/pc/roadview_minimap_wk_2018.png',
    new kakao.maps.Size(26, 46),
    {
        // 스프라이트 이미지를 사용합니다.
        // 스프라이트 이미지 전체의 크기를 지정하고
        spriteSize: new kakao.maps.Size(1666, 168),
        // 사용하고 싶은 영역의 좌상단 좌표를 입력합니다.
        // background-position으로 지정하는 값이며 부호는 반대입니다.
        spriteOrigin: new kakao.maps.Point(705, 114),
        offset: new kakao.maps.Point(13, 46)
    }
);

// 드래그가 가능한 마커를 생성합니다
var marker = new kakao.maps.Marker({
    image : markImage,
    position: mapCenter,
    draggable: true
});

// 마커에 dragend 이벤트를 등록합니다
kakao.maps.event.addListener(marker, 'dragend', function(mouseEvent) {

    // 현재 마커가 놓인 자리의 좌표입니다 
    var position = marker.getPosition();

    // 마커가 놓인 위치를 기준으로 로드뷰를 설정합니다
    toggleRoadview(position);
});

//지도에 클릭 이벤트를 등록합니다
kakao.maps.event.addListener(map, 'click', function(mouseEvent){
    
    // 지도 위에 로드뷰 도로 오버레이가 추가된 상태가 아니면 클릭이벤트를 무시합니다 
    if(!overlayOn) {
        return;
    }

    // 클릭한 위치의 좌표입니다 
    var position = mouseEvent.latLng;

    // 마커를 클릭한 위치로 옮깁니다
    marker.setPosition(position);

    // 클락한 위치를 기준으로 로드뷰를 설정합니다
    toggleRoadview(position);
});

// 전달받은 좌표(position)에 가까운 로드뷰의 파노라마 ID를 추출하여
// 로드뷰를 설정하는 함수입니다
function toggleRoadview(position){
    rvClient.getNearestPanoId(position, 50, function(panoId) {
        // 파노라마 ID가 null 이면 로드뷰를 숨깁니다
        if (panoId === null) {
            toggleMapWrapper(true, position);
        } else {
         toggleMapWrapper(false, position);

            // panoId로 로드뷰를 설정합니다
            rv.setPanoId(panoId, position);
        }
    });
}

// 지도를 감싸고 있는 div의 크기를 조정하는 함수입니다
function toggleMapWrapper(active, position) {
    if (active) {

        // 지도를 감싸고 있는 div의 너비가 100%가 되도록 class를 변경합니다 
        container.className = '';

        // 지도의 크기가 변경되었기 때문에 relayout 함수를 호출합니다
        map.relayout();

        // 지도의 너비가 변경될 때 지도중심을 입력받은 위치(position)로 설정합니다
        map.setCenter(position);
    } else {

        // 지도만 보여지고 있는 상태이면 지도의 너비가 50%가 되도록 class를 변경하여
        // 로드뷰가 함께 표시되게 합니다
        if (container.className.indexOf('view_roadview') === -1) {
            container.className = 'view_roadview';

            // 지도의 크기가 변경되었기 때문에 relayout 함수를 호출합니다
            map.relayout();

            // 지도의 너비가 변경될 때 지도중심을 입력받은 위치(position)로 설정합니다
            map.setCenter(position);
        }
    }
}

// 지도 위의 로드뷰 도로 오버레이를 추가,제거하는 함수입니다
function toggleOverlay(active) {
    if (active) {
        overlayOn = true;

        // 지도 위에 로드뷰 도로 오버레이를 추가합니다
        map.addOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW);

        // 지도 위에 마커를 표시합니다
        marker.setMap(map);
        marker1.setMap(null); //f로드뷰 오버레이일 때 클릭마커 지움

        // 마커의 위치를 지도 중심으로 설정합니다 
        marker.setPosition(map.getCenter());

        // 로드뷰의 위치를 지도 중심으로 설정합니다
        toggleRoadview(map.getCenter());
    } else {
        overlayOn = false;

        // 지도 위의 로드뷰 도로 오버레이를 제거합니다
        map.removeOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW);

        // 지도 위의 마커를 제거합니다
        marker.setMap(null);
                marker1.setMap(map); //f로드뷰 오버레이일 때 클릭마커 지움

    }
}

// 지도 위의 로드뷰 버튼을 눌렀을 때 호출되는 함수입니다
function setRoadviewRoad() {
    var control = document.getElementById('roadviewControl');

    // 버튼이 눌린 상태가 아니면
    if (control.className.indexOf('active') === -1) {
        control.className = 'active';

        // 로드뷰 도로 오버레이가 보이게 합니다
        toggleOverlay(true);
    } else {
        control.className = '';

        // 로드뷰 도로 오버레이를 제거합니다
        toggleOverlay(false);
    }
}

// 로드뷰에서 X버튼을 눌렀을 때 로드뷰를 지도 뒤로 숨기는 함수입니다
function closeRoadview() {
    var position = marker.getPosition();
    toggleMapWrapper(true, position);
}

function setCenter(Lat, Lng) {
    // 이동할 위도 경도 위치를 생성합니다 
    var moveLatLon = new daum.maps.LatLng(Lat, Lng);
  map.setLevel(1);

    // 지도 중심을 이동 시킵니다
    map.panTo(moveLatLon);
var circle = new daum.maps.Circle({
    center : new daum.maps.LatLng(Lat,  Lng),  // 원의 중심좌표 입니다 
    radius: 50, // 미터 단위의 원의 반지름입니다 
    strokeWeight: 1, // 선의 두께입니다 
    strokeColor: '#ffa500', // 선의 색깔입니다
    strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
    strokeStyle: 'dashed', // 선의 스타일 입니다
    fillColor: '#FF1000', // 채우기 색깔입니다
    fillOpacity: 0.3  // 채우기 불투명도 입니다   
}); 

// 지도에 원을 표시합니다 
circle.setMap(map);     
setTimeout(function(){
circle.setMap(null);    ;
}, 1000);        
}

// 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
var mapTypeControl = new kakao.maps.MapTypeControl();
// 지도에 컨트롤을 추가해야 지도위에 표시됩니다
// kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPLEFT);

// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
// var zoomControl = new kakao.maps.ZoomControl();
// map.addControl(zoomControl, kakao.maps.ControlPosition.LEFT);

var myMarker;

navigator.geolocation.getCurrentPosition(function(pos) {

		myPosLat = pos.coords.latitude;
		myPosLng = pos.coords.longitude;

		var markerImage = new kakao.maps.MarkerImage("https://hamancctv.github.io/2/pin_me.png", new kakao.maps.Size(56, 49), {offset: new kakao.maps.Point(28, 49)});
		myMarker = new kakao.maps.Marker({
			map: map,
			position: new kakao.maps.LatLng(myPosLat, myPosLng),
			image: markerImage,
			title : "내위치",
			clickable: false
		});

});	
	

// 마커를 표시할 위치와 내용을 가지고 있는 객체 배열입니다 
var positions = [];  // 마커 목록
var sel_txt = [];    // 글상자 목록

Promise.all([
    fetch('markers.json').then(res => res.json()),
    fetch('sel_txt.json').then(res => res.json())
]).then(([markersData, selTxtData]) => {
    positions = markersData;
    sel_txt = selTxtData;

    console.log('positions:', positions);
    console.log('sel_txt:', sel_txt);
});
// 여기까지 끝
	


    
for (var i = 0; i < positions.length; i ++) {
    // 마커를 생성합니다
    var marker2 = new kakao.maps.Marker({
        map: map, // 마커를 표시할 지도
        position: positions[i].latlng, // 마커의 위치
        image:positions[i].markerImage
    });

       // 마커에 표시할 인포윈도우를 생성합니다 
    var infowindow = new kakao.maps.InfoWindow({
        content: positions[i].content // 인포윈도우에 표시할 내용
        
    });
    // 마커에 표시할 인포윈도우를 생성합니다 
    var infowindow2 = new kakao.maps.InfoWindow({
        content: positions[i].content // 인포윈도우에 표시할 내용
        
    });
 
    // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
    // 이벤트 리스너로는 클로저를 만들어 등록합니다 
    // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
	kakao.maps.event.addListener(marker2, 'click', makeOverListener(map, marker2, infowindow));
kakao.maps.event.addListener(map, 'click', makeOutListener(infowindow));   
    kakao.maps.event.addListener(marker2, 'mouseover', makeOverListener2(map, marker2, infowindow2));
    kakao.maps.event.addListener(marker2, 'mouseout', makeOutListener2(infowindow2));

    };


// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
function makeOverListener(map, marker2, infowindow) {
    return function() {
        infowindow.open(map, marker2);
         var latlng = this.getPosition();
        $('#gpsyx').val(latlng.getLat() + ', ' + latlng.getLng());  
var content = infowindow.getContent();
var value, name, item, i;
        value = content.substring(0, 5);
        item = document.getElementsByClassName("sel_txt");
        for(i=0;i<item.length;i++){
          name = item[i].getElementsByClassName("name");
          if(name[0].innerHTML.toUpperCase().indexOf(value) > -1){
            item[i].style.display = "flex";
          }else{
            item[i].style.display = "none";
          }
        }
    };
};
	
// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
function makeOverListener2(map, marker2, infowindow2) {
    return function() {
        infowindow2.open(map, marker2);
    };
}
    
// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
function makeOutListener(infowindow2) {
    return function() {
        infowindow2.close();
    };
}
    
// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
function makeOutListener2(infowindow2) {
    return function() {
        infowindow2.close();
    };
}
 function Enter_Check(){
        // 엔터키의 코드는 13입니다.
    if(event.keyCode == 13){
        btnsearch_click();  // 실행할 이벤트
    }
}
 function doClick(element) {
	divText = $(element).html();
  $('#status').html('You clicked on: ' + divText);
 }

$(()=>{
  // make divs with an onclick attribute tabbable/clickable
  $('div[onclick]')
    .attr('tabindex', '0')                     // Add tab indexes
    .keypress((evt)=>{
    var key = evt.key;
    evt.preventDefault();                  // Ensure all default keypress
    // actions are not used
    if (key === ' ' || key === 'Enter') {  // Only send click events for Space
      // or Enter keys
      evt.currentTarget.click();         // Run the click event for element
    }
  });
 			
  // activate the first clickable div

});
 
    
   // 지도가 이동, 확대, 축소로 인해 중심좌표가 변경되면 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
kakao.maps.event.addListener(map, 'center_changed', function() {

    // 지도의  레벨을 얻어옵니다
    var level = map.getLevel();
    // 지도의 중심좌표를 얻어옵니다 
    var latlng = map.getCenter(); 
        $('#gpsyx').val(latlng.getLat() + ', ' + latlng.getLng());  
});
    
var markers = [];
 
        function btnsearch_click() {
//1 . 모든 포커스 태그를 blur 하는거같다. 
$(':focus').blur();  
	 removeMarker();

		// 주소-좌표 변환 객체를 생성합니다
		var geocoder = new kakao.maps.services.Geocoder();
		
		// 주소로 좌표를 검색합니다
		geocoder.addressSearch($('#keyword').val(), function(result, status) {

		    // 정상적으로 검색이 완료됐으면 
		     if (status === kakao.maps.services.Status.OK) {
		        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
		        // 결과값으로 받은 위치를 마커로 표시합니다


// 주소검색시 input창 자동삭제    var obj = document.getElementsByClassName('clickdown');
//        for (var i = 0; i < obj.length; i++) {
//            obj[i].value = '';
//        }

             }
        
            else {
                // 장소 검색 객체를 생성합니다
                var ps = new kakao.maps.services.Places();
                // 키워드로 장소를 검색합니다
var options = {
    location : new kakao.maps.LatLng(myPosLat, myPosLng)
};
    // 장소검색 객체를 통해 키워드로 장소검색을 요청합니다
                ps.keywordSearch($('#keyword').val(), placesSearchCB, options);
// 키워드 검색 완료 시 호출되는 콜백함수 입니다
function placesSearchCB (data, status, pagination) {

    if (status === kakao.maps.services.Status.OK) {
       // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
        // LatLngBounds 객체에 좌표를 추가합니다
var coords = new kakao.maps.LatLng(data[0].y, data[0].x);
}
                 var marker = new kakao.maps.Marker({
		            map: map,
                    image: markerImage1,
		            position: coords
		        });   

            
			     map.setLevel(4);
		        map.setCenter(coords);
 
            var circle = new daum.maps.Circle({
    center : coords,  // 원의 중심좌표 입니다 
    radius: 50, // 미터 단위의 원의 반지름입니다 
    strokeWeight: 1, // 선의 두께입니다 
    strokeColor: '#ffa500', // 선의 색깔입니다
    strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
    strokeStyle: 'dashed', // 선의 스타일 입니다
    fillColor: '#FF1000', // 채우기 색깔입니다
    fillOpacity: 0.3  // 채우기 불투명도 입니다   
}); 

// 지도에 원을 표시합니다 
circle.setMap(map);     
setTimeout(function(){
circle.setMap(null);    
}, 1000)       
    // ====================
     markers.push(marker);  // 배열에 생성된 마커를 추가합니다
    return marker;
        };
}
            
 		        var marker = new kakao.maps.Marker({
		            map: map,
                    image: markerImage1,
		            position: coords
		        });   

            
			     map.setLevel(1);
		        map.setCenter(coords);
 
            var circle = new daum.maps.Circle({
    center : coords,  // 원의 중심좌표 입니다 
    radius: 50, // 미터 단위의 원의 반지름입니다 
    strokeWeight: 1, // 선의 두께입니다 
    strokeColor: '#ffa500', // 선의 색깔입니다
    strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
    strokeStyle: 'dashed', // 선의 스타일 입니다
    fillColor: '#FF1000', // 채우기 색깔입니다
    fillOpacity: 0.3  // 채우기 불투명도 입니다   
}); 

// 지도에 원을 표시합니다 
circle.setMap(map);     
setTimeout(function(){
circle.setMap(null);    
}, 1000)       
    // ====================
     markers.push(marker);  // 배열에 생성된 마커를 추가합니다
    return marker;
        })};
    
// 지도를 클릭한 위치에 표출할 마커입니다
    var imageSrc = 'https://raw.githubusercontent.com/kang-chan/hamancctv2/main/rainbow.png', // 마커이미지의 주소입니다    
    imageSize = new kakao.maps.Size(40, 50), // 마커이미지의 크기입니다
    imageOption = {offset: new kakao.maps.Point(20, 45)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.
      
// 마커의 이미지정보를 가지고 있는 마커이미지를 생성합니다
var markerImage1 = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
    markerPosition1 = new kakao.maps.LatLng(map.center); // 마커가 표시될 위치입니다

// 마커를 생성합니다
var marker1 = new kakao.maps.Marker({
    image: markerImage1 // 마커이미지 설정 
});

// 마커가 지도 위에 표시되도록 설정합니다
marker1.setMap(map);  
// 마커가 드래그 가능하도록 설정합니다 
marker1.setDraggable(true); 
	
	
    // 마커에 dragend 이벤트를 등록합니다
kakao.maps.event.addListener(marker1, 'dragend', function(mouseEvent) {
    // 현재 마커가 놓인 자리의 좌표입니다 
var position = marker1.getPosition();
    $('#gpsyx').val(position.getLat() + ', ' + position.getLng());  
});
    
    
// 지도에 클릭 이벤트를 등록합니다
// 지도를 클릭하면 마지막 파라미터로 넘어온 함수를 호출합니다
kakao.maps.event.addListener(map, 'click', function(mouseEvent) {        

    // 클릭한 위도, 경도 정보를 가져옵니다
    var latlng = mouseEvent.latLng;
    // 마커 위치를 클릭한 위치로 옮깁니다
//    marker1.setPosition(latlng);

    //alert(message);
// 좌표 input에 좌표 넣기
    $('#gpsyx').val(latlng.getLat() + ', ' + latlng.getLng());  
});


    
</script>


    <div id="menu_rule" class="bg_white" style="border:1px solid #919191;border-radius:5px;">   
        <button id='btnMARKER' onclick="rule_line()">거리</button>
	    <button id='btnPOLYLINE'  onclick="rule_poly()">면적</button>
        <button id='btnARROW'  onclick="rule_circle()">반경</button>    
        <button class='berror' onclick="RulerRemove()">초기화</button></div>

<div id="menu_wrap" class="bg_white" style="border:1px solid #919191;border-radius:10px;">

<script type="text/javascript">
      function filter(){

        var value, name, item, i;

        value = document.getElementById("keyword").value.toUpperCase();
        item = document.getElementsByClassName("sel_txt");

        for(i=0;i<item.length;i++){
          name = item[i].getElementsByClassName("name");
          if(name[0].innerHTML.toUpperCase().indexOf(value) > -1){
            item[i].style.display = "flex";
          }else{
            item[i].style.display = "none";
          }
        }
      };
    
</script>
  
 <script> 
     
function removeMarker() {
    for ( var i = 0; i < markers.length; i++ ) {
        markers[i].setMap(null);
    }
    markers = [];
}
     // 2-2. input:text 복사
	  
    document.getElementById("btn_input_copy").onclick = function(){
        const input_text = document.getElementById("gpsyx");
        gpsyx.select();
        document.execCommand('copy');
    };

 </script>

</body>
</html>
